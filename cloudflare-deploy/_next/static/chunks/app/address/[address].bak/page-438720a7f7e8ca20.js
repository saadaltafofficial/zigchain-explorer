(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{39101:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(45474),r=s(43781),l=s(77560);let n=(0,s(59188).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var i=s(90563),d=s.n(i),o=s(71530),c=s(68564),m=s(37126);function x(){let e=(0,c.useParams)().address,[t,s]=(0,o.useState)(null),[i,x]=(0,o.useState)(!0),[u,h]=(0,o.useState)(null),[g,f]=(0,o.useState)(!1),[p,v]=(0,o.useState)([]),[b,j]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),[w,k]=(0,o.useState)(!1),[_,F]=(0,o.useState)(!1),[E,I]=(0,o.useState)(0),[S,T]=(0,o.useState)(3),[A,G]=(0,o.useState)(!1),P=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(k(!0),T(3)):s?G(!0):j(!0),N(null);try{var a,r;console.log("Fetching transactions for address: ".concat(e," with maxPages: ").concat(S));let t=await (0,m.tc)(e,"all",S);console.log("Transaction response:",t);let l=(null==t?void 0:null===(a=t.result)||void 0===a?void 0:a.txs)||[];console.log("Found ".concat(l.length," transactions"));let n=(null==t?void 0:null===(r=t.result)||void 0===r?void 0:r.pagination_info)||{fetched_count:l.length,total_count:l.length,has_more:!1,max_pages_fetched:S};F(n.has_more),I(n.total_count),l.length>0&&console.log("Transaction data structure:",JSON.stringify(l[0],null,2));let i=l.map(t=>{var s,a,r,l,n;let i;let d=t.hash||"",o=t.height||"0";t.timestamp&&console.log("Transaction ".concat(d," has timestamp field:"),t.timestamp),t.time&&console.log("Transaction ".concat(d," has time field:"),t.time);let c="0 uzig",m="0 uzig",x="",u="",h=(null===(s=t.tx_result)||void 0===s?void 0:s.code)===0?"success":"failed";t.timestamp?i=t.timestamp:(i=new Date().toISOString(),console.log("Missing timestamp for transaction ".concat(d,", using current time as fallback")));try{let s=(null===(a=t.tx_result)||void 0===a?void 0:a.events)||[],r=s.filter(e=>"transfer"===e.type).find(t=>{let s=t.attributes||[],a=s.find(e=>"recipient"===e.key),r=s.find(e=>"sender"===e.key),l=(null==a?void 0:a.value)||"",n=(null==r?void 0:r.value)||"";return l===e||n===e});if(r){let e=r.attributes||[],t=e.find(e=>"sender"===e.key),s=e.find(e=>"recipient"===e.key),a=e.find(e=>"amount"===e.key);t&&(x=t.value||""),s&&(u=s.value||""),a&&(c=a.value||"0uzig")}for(let e of s.filter(e=>"tx"===e.type)){let t=(e.attributes||[]).find(e=>"fee"===e.key);if(t&&t.value){m=t.value;break}}}catch(e){console.warn("Error parsing transaction events: ".concat(e))}if("0 uzig"===m)try{(null===(n=t.tx)||void 0===n?void 0:null===(l=n.auth_info)||void 0===l?void 0:null===(r=l.fee)||void 0===r?void 0:r.amount)&&t.tx.auth_info.fee.amount.length>0&&(m=t.tx.auth_info.fee.amount[0].amount+" "+t.tx.auth_info.fee.amount[0].denom)}catch(e){console.warn("Error parsing fee from tx data: ".concat(e))}return{hash:d,height:parseInt(o),timestamp:i,type:"transfer",status:h,fee:m,amount:c,from:x,to:u}});s?v(e=>[...e,...i]):v(i)}catch(e){console.error("Error fetching transactions:",e),e instanceof Error?N("Failed to load transactions: ".concat(e.message)):N("Failed to load transactions. Please try again later.")}finally{j(!1),k(!1),G(!1)}},Z=async()=>{x(!0),h(null);try{let t=await (0,m.Gf)(e);if(console.log("Account data received:",t),!t||!t.address)throw Error("Invalid account data received");s(t),P()}catch(e){if(console.error("Error fetching address data:",e),e instanceof Error&&(console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack)),e&&"object"==typeof e&&"response"in e){var t,a,r;console.error("API Response status:",null===(t=e.response)||void 0===t?void 0:t.status),console.error("API Response data:",null===(a=e.response)||void 0===a?void 0:a.data),console.error("API Request URL:",null===(r=e.config)||void 0===r?void 0:r.url)}e instanceof Error?h("Failed to load address data: ".concat(e.message)):h("Failed to load address data. Please try again later.")}finally{x(!1)}};(0,o.useEffect)(()=>{s(null),h(null),x(!0),Z()},[e]);let z=e=>{try{if(!e)return"0 ZIG";if(e.includes("uzig")){let t=e.replace(/[^0-9.]/g,""),s=parseFloat(t)/1e6;if(s>=1e6)return"".concat((s/1e6).toFixed(4),"M ZIG");if(s>=1e3)return"".concat((s/1e3).toFixed(4),"K ZIG");if(s<1e-4)return"".concat(s.toExponential(4)," ZIG");else return"".concat(s.toFixed(6)," ZIG")}if("string"==typeof e&&e.includes(".")){let t=parseFloat(e);return"".concat(t.toFixed(6)," ZIG")}if(!isNaN(parseFloat(e))){let t=parseFloat(e);return"".concat((t/1e6).toFixed(6)," ZIG")}return e}catch(t){return console.error("Error formatting amount:",t),e}},M=e=>e?"".concat(e.substring(0,8),"...").concat(e.substring(e.length-8)):"",R=e=>{let t=e.match(/(\d+)\s*uzig/);if(!t)return e;let s=parseInt(t[1]);return"".concat((s/1e6).toFixed(2)," ZIG")};return u?(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("div",{className:"bg-red-900/20 border-l-4 border-red-600 p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-400",children:u})}),(0,a.jsxs)(d(),{href:"/",className:"text-blue-400 hover:text-blue-300 hover:underline flex items-center",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2 rotate-180"}),"Return to Home"]})]}):(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"container mx-auto py-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-white px-6",children:"Address Details"})}),i?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),(0,a.jsxs)("div",{className:"rounded-lg shadow-md p-6",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"border-b border-gray-200 py-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},t))]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg shadow-md p-6 mb-4",children:[(0,a.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-sm mb-4 break-all flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-gray-300 text-sm sm:text-base",children:e}),(0,a.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)},className:"text-blue-500 hover:text-blue-600 flex items-center self-end sm:self-auto",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-1"}),g?"Copied!":"copy"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-sm",children:[(0,a.jsx)("h3",{className:"text-sm  text-gray-300 mb-1",children:"Balance"}),(0,a.jsx)("p",{className:"text-lg text-gray-300",children:z((null==t?void 0:t.balance)||"0")})]}),(null==t?void 0:t.delegated_amount)&&parseInt(t.delegated_amount)>0&&(0,a.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Delegated"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-white",children:z(t.delegated_amount)})]}),(null==t?void 0:t.rewards)&&parseInt(t.rewards)>0&&(0,a.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Rewards"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-white",children:z(t.rewards)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-2 md:mb-0",children:"Transactions"})}),b&&!w?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):y?(0,a.jsx)("div",{className:"bg-red-900/20 border-l-4 border-red-600 p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-400",children:y})}):0===p.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"No transactions found for this address."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto overflow-y-auto max-h-[70vh] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,a.jsx)("thead",{className:"",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Tx Hash"}),(0,a.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-700",children:p.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-700/30",children:[(0,a.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,a.jsxs)(d(),{href:"/tx/".concat(e.hash),className:"text-blue-400 hover:text-blue-300 hover:underline flex items-center",children:[M(e.hash),(0,a.jsx)(n,{className:"h-3 w-3 ml-1"})]})}),(0,a.jsx)("td",{className:"p-4 whitespace-nowrap text-gray-300",children:e.type}),(0,a.jsx)("td",{className:"p-4 whitespace-nowrap text-gray-300",children:R(e.amount)}),(0,a.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===e.status?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"),children:e.status})})]},"".concat(e.hash,"-").concat(t,"-desktop")))})]})}),(0,a.jsx)("div",{className:"sm:hidden space-y-4",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)(d(),{href:"/tx/".concat(e.hash),className:"text-blue-400 hover:text-blue-300 hover:underline flex items-center text-sm break-all",children:[M(e.hash),(0,a.jsx)(n,{className:"h-3 w-3 ml-1 flex-shrink-0"})]}),(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("success"===e.status?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Type:"}),(0,a.jsx)("p",{className:"text-gray-300",children:e.type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Amount:"}),(0,a.jsx)("p",{className:"text-gray-300",children:R(e.amount)})]})]})]},"".concat(e.hash,"-").concat(t,"-mobile")))})]}),p.length>0&&(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-400 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"mb-2",children:["Showing ",p.length," of ",E," transaction",1!==E?"s":""]}),_&&(0,a.jsx)("button",{onClick:()=>{T(e=>e+3),P(!1,!0)},disabled:A,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Loading..."]}):"Load More Transactions"})]})]})]})]})})}},67992:(e,t,s)=>{Promise.resolve().then(s.bind(s,39101))}},e=>{var t=t=>e(e.s=t);e.O(0,[223,765,358],()=>t(67992)),_N_E=e.O()}]);
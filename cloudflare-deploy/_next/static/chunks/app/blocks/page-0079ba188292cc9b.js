(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{55092:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var o=s(45474),r=s(71530),a=s(37126),l=s(72052);function i(){let[e,t]=(0,r.useState)(1),[s,i]=(0,r.useState)(10),[n,c]=(0,r.useState)(0),[g,h]=(0,r.useState)(0),[d,x]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[b,u]=(0,r.useState)(!0),[y,k]=(0,r.useState)(null),j=async()=>{try{u(!0),k(null),console.log("[Blocks] Fetching ".concat(50," latest blocks from API..."));let t=await(0,a.we)(50);console.log("[Blocks] Found ".concat(t.length," blocks"));let o=t.map((e=>({height:e.height,time:e.time,proposer:e.proposer,numTxs:e.txCount||0,hash:e.hash})));x(o),c(o.length),o.length>0&&h(o[0].height),sessionStorage.setItem("zigchain_blocks",JSON.stringify(o)),sessionStorage.setItem("zigchain_blocks_page",e.toString()),sessionStorage.setItem("zigchain_blocks_per_page",s.toString()),sessionStorage.setItem("zigchain_blocks_latest_height",g.toString()),sessionStorage.setItem("zigchain_blocks_total",o.length.toString()),w(o)}catch(e){console.error("[Blocks] Error fetching blocks:",e),k(e instanceof Error?e.message:"Failed to load blocks. Please try again later."),u(!1)}let t=setTimeout((()=>{b||(async()=>{try{let e=await(0,a.we)(1);e.length>0&&e[0].height>g&&(console.log("[Blocks] Updated latest block height: ".concat(e[0].height)),h(e[0].height),c(e[0].height),sessionStorage.setItem("zigchain_blocks_latest_height",e[0].height.toString()),sessionStorage.setItem("zigchain_blocks_total",e[0].height.toString()))}catch(e){console.error("[Blocks] Error refreshing latest height:",e)}})()}),3e4);return()=>clearTimeout(t)};(0,r.useEffect)((()=>{w()}),[e,s]);let w=function(){let t=(e-1)*s,o=t+s;p((arguments.length>0&&void 0!==arguments[0]?arguments[0]:d).slice(t,o)),u(!1)},v=e=>{t(e),sessionStorage.setItem("zigchain_blocks_page",e.toString())},f=e=>{i(e),t(1),sessionStorage.setItem("zigchain_blocks_per_page",e.toString())};return(0,r.useEffect)((()=>{let e=sessionStorage.getItem("zigchain_blocks"),s=sessionStorage.getItem("zigchain_blocks_page"),o=sessionStorage.getItem("zigchain_blocks_per_page");sessionStorage.getItem("zigchain_blocks_max_fetch");let r=sessionStorage.getItem("zigchain_blocks_latest_height");if(sessionStorage.getItem("zigchain_blocks_total"),e)try{let a=JSON.parse(e);x(a),c(a.length),w(a),console.log("[Blocks] Restored blocks from session storage"),s&&t(parseInt(s)),o&&i(parseInt(o)),r&&h(parseInt(r))}catch(e){console.error("[Blocks] Error parsing saved blocks:",e)}else j()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-16",children:"Blocks"}),y&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-bold",children:"Error"}),(0,o.jsx)("p",{children:y})]}),(0,o.jsx)("button",{onClick:()=>{j()},className:"bg-red-700 hover:bg-red-800 text-white font-bold py-2 px-4 rounded",children:"Retry"})]})}),b?(0,o.jsx)("div",{className:"space-y-4",children:[...Array(10)].map(((e,t)=>(0,o.jsxs)("div",{className:"dark:bg-gray-800 rounded-lg shadow-md p-4 animate-pulse",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,o.jsx)("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/6"})]}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mt-3"})]},t)))}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"space-y-4 mb-6 ",children:m&&m.length>0?m.map((e=>(0,o.jsx)(l.A,{height:e.height,hash:e.hash,time:(0,a.Yq)(e.time),txCount:e.numTxs},e.height))):(0,o.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:"No blocks found. This could be because your node is still syncing or there are connection issues."})}),m&&m.length>0&&(0,o.jsx)("div",{className:"mt-16",children:(0,o.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-center md:mx-auto md:justify-between md:flex-row flex-col md:space-x-4 md:space-y-0 space-y-4 md:text-left text-center",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>v(1),disabled:1===e,className:"p-1 rounded ".concat(1===e?"text-gray-500 cursor-not-allowed":"text-gray-300 hover:bg-gray-700"),"aria-label":"First page",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("polyline",{points:"11 17 6 12 11 7"}),(0,o.jsx)("polyline",{points:"18 17 13 12 18 7"})]})}),(0,o.jsx)("button",{onClick:()=>v(e-1),disabled:1===e,className:"p-1 rounded ".concat(1===e?"text-gray-500 cursor-not-allowed":"text-gray-300 hover:bg-gray-700"),"aria-label":"Previous page",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,o.jsx)("div",{className:"flex items-center mx-3 px-3 py-1 bg-gray-700 rounded",children:(0,o.jsxs)("span",{className:"text-sm text-gray-200",children:["Page ",(0,o.jsx)("span",{className:"font-bold",children:e})," of ",(0,o.jsx)("span",{className:"font-bold",children:Math.max(1,Math.ceil(n/s))})]})}),(0,o.jsx)("button",{onClick:()=>v(e+1),disabled:e>=Math.ceil(n/s),className:"p-1 rounded ".concat(e>=Math.ceil(n/s)?"text-gray-500 cursor-not-allowed":"text-gray-300 hover:bg-gray-700"),"aria-label":"Next page",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"9 18 15 12 9 6"})})}),(0,o.jsx)("button",{onClick:()=>v(Math.ceil(n/s)),disabled:e>=Math.ceil(n/s),className:"p-1 rounded ".concat(e>=Math.ceil(n/s)?"text-gray-500 cursor-not-allowed":"text-gray-300 hover:bg-gray-700"),"aria-label":"Last page",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("polyline",{points:"13 17 18 12 13 7"}),(0,o.jsx)("polyline",{points:"6 17 11 12 6 7"})]})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 md:mt-0 mt-4",children:[(0,o.jsx)("label",{className:"text-sm text-gray-300",children:"Items per page:"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>f(10),className:"px-2 py-1 text-xs hover:cursor-pointer rounded ".concat(10===s?"bg-blue-600 text-white":" text-gray-300 hover:bg-gray-700"),children:"10"}),(0,o.jsx)("button",{onClick:()=>f(25),className:"px-2 py-1 text-xs hover:cursor-pointer rounded ".concat(25===s?"bg-blue-600 text-white":" text-gray-300 hover:bg-gray-700"),children:"25"}),(0,o.jsx)("button",{onClick:()=>f(50),className:"px-2 py-1 text-xs hover:cursor-pointer rounded ".concat(50===s?"bg-blue-600 text-white":" text-gray-300 hover:bg-gray-700"),children:"50"})]})]})]})})})]})]})}},75834:(e,t,s)=>{Promise.resolve().then(s.bind(s,55092))}},e=>{e.O(0,[223,765,358],(()=>(t=>e(e.s=t))(75834))),_N_E=e.O()}]);